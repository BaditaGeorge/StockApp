{"ast":null,"code":"import _regeneratorRuntime from\"D:/work/ReactTraining/stock/host/stockapp.github.io/stock-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/work/ReactTraining/stock/host/stockapp.github.io/stock-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";export function retrieveApiData(setSymbols){function retrieveData(){return _retrieveData.apply(this,arguments);}function _retrieveData(){_retrieveData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,resp,data,symbolObjects,i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url='https://finnhub.io/api/v1/stock/symbol?exchange=US&token=bukfm8n48v6s9fns403g';_context.next=3;return fetch(url);case 3:resp=_context.sent;_context.next=6;return resp.json();case 6:data=_context.sent;symbolObjects=[];for(i=0;i<data.length;i++){symbolObjects.push({notation:data[i].symbol,description:data[i].description});}setSymbols(symbolObjects);case 10:case\"end\":return _context.stop();}}},_callee);}));return _retrieveData.apply(this,arguments);}retrieveData();}export function retrieveSymbolData(setSymbolData,setLoading,symbol,startDate,endDate){function retrieveSymbolData(){return _retrieveSymbolData.apply(this,arguments);}function _retrieveSymbolData(){_retrieveSymbolData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var url,resp,data,symbolData,i;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:startDate=Math.floor(startDate.getTime()/1000);endDate=Math.floor(endDate.getTime()/1000);url=\"https://finnhub.io/api/v1/stock/candle?symbol=\".concat(symbol,\"&resolution=D&from=\").concat(startDate,\"&to=\").concat(endDate,\"&token=bukfm8n48v6s9fns403g\");_context2.next=5;return fetch(url);case 5:resp=_context2.sent;_context2.next=8;return resp.json();case 8:data=_context2.sent;symbolData={lowest:[],highest:[],close:[]};symbolData.lowest=data.l;symbolData.highest=data.h;if(data.l!==undefined){for(i=0;i<data.l.length;i++){symbolData.close.push((data.l[i]+data.h[i])/2);}}setLoading(false);setSymbolData(symbolData);case 15:case\"end\":return _context2.stop();}}},_callee2);}));return _retrieveSymbolData.apply(this,arguments);}retrieveSymbolData();}","map":{"version":3,"sources":["D:/work/ReactTraining/stock/host/stockapp.github.io/stock-app/src/utility/ApiData.tsx"],"names":["retrieveApiData","setSymbols","retrieveData","url","fetch","resp","json","data","symbolObjects","i","length","push","notation","symbol","description","retrieveSymbolData","setSymbolData","setLoading","startDate","endDate","Math","floor","getTime","symbolData","lowest","highest","close","l","h","undefined"],"mappings":"6RAIA,MAAO,SAASA,CAAAA,eAAT,CAAyBC,UAAzB,CAAwC,SAC5BC,CAAAA,YAD4B,8IAC3C,qKACUC,GADV,CACuB,+EADvB,uBAEyBC,CAAAA,KAAK,CAACD,GAAD,CAF9B,QAEQE,IAFR,qCAGyBA,CAAAA,IAAI,CAACC,IAAL,EAHzB,QAGQC,IAHR,eAIQC,aAJR,CAIuC,EAJvC,CAKI,IAAQC,CAAR,CAAmB,CAAnB,CAAsBA,CAAC,CAAGF,IAAI,CAACG,MAA/B,CAAuCD,CAAC,EAAxC,CAA2C,CACvCD,aAAa,CAACG,IAAd,CAAmB,CAACC,QAAQ,CAACL,IAAI,CAACE,CAAD,CAAJ,CAAQI,MAAlB,CAAyBC,WAAW,CAACP,IAAI,CAACE,CAAD,CAAJ,CAAQK,WAA7C,CAAnB,EACH,CACDb,UAAU,CAACO,aAAD,CAAV,CARJ,uDAD2C,+CAW3CN,YAAY,GACf,CAED,MAAO,SAASa,CAAAA,kBAAT,CAA4BC,aAA5B,CAA8CC,UAA9C,CAA6DJ,MAA7D,CAA2EK,SAA3E,CAAyFC,OAAzF,CAAqG,SACzFJ,CAAAA,kBADyF,gKACxG,uKACIG,SAAS,CAAGE,IAAI,CAACC,KAAL,CAAWH,SAAS,CAACI,OAAV,GAAoB,IAA/B,CAAZ,CACAH,OAAO,CAAGC,IAAI,CAACC,KAAL,CAAWF,OAAO,CAACG,OAAR,GAAkB,IAA7B,CAAV,CACMnB,GAHV,yDAGwEU,MAHxE,+BAGoGK,SAHpG,gBAGoHC,OAHpH,uDAIqBf,CAAAA,KAAK,CAACD,GAAD,CAJ1B,QAIQE,IAJR,uCAKqBA,CAAAA,IAAI,CAACC,IAAL,EALrB,QAKQC,IALR,gBAMQgB,UANR,CAMgC,CAACC,MAAM,CAAC,EAAR,CAAWC,OAAO,CAAC,EAAnB,CAAsBC,KAAK,CAAC,EAA5B,CANhC,CAOIH,UAAU,CAACC,MAAX,CAAoBjB,IAAI,CAACoB,CAAzB,CACAJ,UAAU,CAACE,OAAX,CAAqBlB,IAAI,CAACqB,CAA1B,CACA,GAAGrB,IAAI,CAACoB,CAAL,GAAWE,SAAd,CAAwB,CACpB,IAAQpB,CAAR,CAAU,CAAV,CAAYA,CAAC,CAACF,IAAI,CAACoB,CAAL,CAAOjB,MAArB,CAA4BD,CAAC,EAA7B,CAAgC,CAC5Bc,UAAU,CAACG,KAAX,CAAiBf,IAAjB,CAAsB,CAACJ,IAAI,CAACoB,CAAL,CAAOlB,CAAP,EAAUF,IAAI,CAACqB,CAAL,CAAOnB,CAAP,CAAX,EAAsB,CAA5C,EACH,CACJ,CACDQ,UAAU,CAAC,KAAD,CAAV,CACAD,aAAa,CAACO,UAAD,CAAb,CAfJ,yDADwG,qDAkBxGR,kBAAkB,GACrB","sourcesContent":["import {useState} from 'react';\r\nimport {setSourceMapRange } from 'typescript';\r\nimport {ISymbol,IStockData} from '../models/StockDataInterfaces';\r\n\r\nexport function retrieveApiData(setSymbols:any){\r\n    async function retrieveData(){\r\n        const url:string = 'https://finnhub.io/api/v1/stock/symbol?exchange=US&token=bukfm8n48v6s9fns403g';\r\n        let resp:any = await fetch(url);\r\n        let data:any = await resp.json();\r\n        let symbolObjects:Array<ISymbol> = [];\r\n        for(let i:number = 0; i < data.length; i++){\r\n            symbolObjects.push({notation:data[i].symbol,description:data[i].description});\r\n        }\r\n        setSymbols(symbolObjects);\r\n    }\r\n    retrieveData();\r\n}\r\n\r\nexport function retrieveSymbolData(setSymbolData:any,setLoading:any,symbol:string,startDate:any,endDate:any){\r\n    async function retrieveSymbolData(){\r\n        startDate = Math.floor(startDate.getTime()/1000);\r\n        endDate = Math.floor(endDate.getTime()/1000);\r\n        const url:string = `https://finnhub.io/api/v1/stock/candle?symbol=${symbol}&resolution=D&from=${startDate}&to=${endDate}&token=bukfm8n48v6s9fns403g`;\r\n        let resp = await fetch(url);\r\n        let data = await resp.json();\r\n        let symbolData:IStockData = {lowest:[],highest:[],close:[]};\r\n        symbolData.lowest = data.l;\r\n        symbolData.highest = data.h;\r\n        if(data.l !== undefined){\r\n            for(let i=0;i<data.l.length;i++){\r\n                symbolData.close.push((data.l[i]+data.h[i])/2);\r\n            }\r\n        }\r\n        setLoading(false);\r\n        setSymbolData(symbolData);\r\n    }\r\n    retrieveSymbolData();\r\n}"]},"metadata":{},"sourceType":"module"}