{"ast":null,"code":"export function RetrieveApiData(setSymbols) {\n  async function retrieveData() {\n    const url = 'https://finnhub.io/api/v1/stock/symbol?exchange=US&token=buk0lsv48v6r2017c170';\n    let resp = await fetch(url);\n    let data = await resp.json();\n    let symbolObjects = [];\n\n    for (let i = 0; i < data.length; i++) {\n      symbolObjects.push({\n        symbol: data[i].symbol,\n        description: data[i].description\n      });\n    }\n\n    setSymbols(symbolObjects);\n  }\n\n  retrieveData();\n}\n_c = RetrieveApiData;\nexport function RetrieveSymbolData(setSymbolData, symbol, startDate, endDate) {\n  async function retrieveSymbolData() {\n    console.log(startDate.getTime().toString().slice(0, -3));\n    startDate = Math.floor(startDate.getTime() / 1000);\n    endDate = Math.floor(endDate.getTime() / 1000);\n    console.log(startDate, endDate);\n    const url = `https://finnhub.io/api/v1/stock/candle?symbol=${symbol}&resolution=D&from=${startDate}&to=${endDate}&token=buk0lsv48v6r2017c170`;\n    let resp = await fetch(url);\n    let data = await resp.json();\n    console.log(data);\n    let symbolData = {};\n    symbolData.low = data.l;\n    symbolData.hgh = data.h;\n    symbolData.curr = [];\n\n    if (data.l !== undefined) {\n      for (let i = 0; i < data.l.length; i++) {\n        symbolData.curr.push((data.l[i] + data.h[i]) / 2);\n      }\n    }\n\n    setSymbolData(symbolData);\n  }\n\n  retrieveSymbolData();\n}\n_c2 = RetrieveSymbolData;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"RetrieveApiData\");\n$RefreshReg$(_c2, \"RetrieveSymbolData\");","map":{"version":3,"sources":["D:/work/ReactTraining/stock/stock-app/stock-app/src/utility/ApiData.tsx"],"names":["RetrieveApiData","setSymbols","retrieveData","url","resp","fetch","data","json","symbolObjects","i","length","push","symbol","description","RetrieveSymbolData","setSymbolData","startDate","endDate","retrieveSymbolData","console","log","getTime","toString","slice","Math","floor","symbolData","low","l","hgh","h","curr","undefined"],"mappings":"AAGA,OAAO,SAASA,eAAT,CAAyBC,UAAzB,EAAwC;AAC3C,iBAAeC,YAAf,GAA6B;AACzB,UAAMC,GAAU,GAAG,+EAAnB;AACA,QAAIC,IAAI,GAAG,MAAMC,KAAK,CAACF,GAAD,CAAtB;AACA,QAAIG,IAAI,GAAG,MAAMF,IAAI,CAACG,IAAL,EAAjB;AACA,QAAIC,aAAwB,GAAG,EAA/B;;AACA,SAAI,IAAIC,CAAQ,GAAG,CAAnB,EAAsBA,CAAC,GAAGH,IAAI,CAACI,MAA/B,EAAuCD,CAAC,EAAxC,EAA2C;AACvCD,MAAAA,aAAa,CAACG,IAAd,CAAmB;AAACC,QAAAA,MAAM,EAACN,IAAI,CAACG,CAAD,CAAJ,CAAQG,MAAhB;AAAuBC,QAAAA,WAAW,EAACP,IAAI,CAACG,CAAD,CAAJ,CAAQI;AAA3C,OAAnB;AACH;;AACDZ,IAAAA,UAAU,CAACO,aAAD,CAAV;AACH;;AACDN,EAAAA,YAAY;AACf;KAZeF,e;AAchB,OAAO,SAASc,kBAAT,CAA4BC,aAA5B,EAA8CH,MAA9C,EAA4DI,SAA5D,EAA0EC,OAA1E,EAAsF;AACzF,iBAAeC,kBAAf,GAAmC;AAC/BC,IAAAA,OAAO,CAACC,GAAR,CAAYJ,SAAS,CAACK,OAAV,GAAoBC,QAApB,GAA+BC,KAA/B,CAAqC,CAArC,EAAuC,CAAC,CAAxC,CAAZ;AACAP,IAAAA,SAAS,GAAGQ,IAAI,CAACC,KAAL,CAAWT,SAAS,CAACK,OAAV,KAAoB,IAA/B,CAAZ;AACAJ,IAAAA,OAAO,GAAGO,IAAI,CAACC,KAAL,CAAWR,OAAO,CAACI,OAAR,KAAkB,IAA7B,CAAV;AACAF,IAAAA,OAAO,CAACC,GAAR,CAAYJ,SAAZ,EAAsBC,OAAtB;AACA,UAAMd,GAAU,GAAI,iDAAgDS,MAAO,sBAAqBI,SAAU,OAAMC,OAAQ,6BAAxH;AACA,QAAIb,IAAI,GAAG,MAAMC,KAAK,CAACF,GAAD,CAAtB;AACA,QAAIG,IAAI,GAAG,MAAMF,IAAI,CAACG,IAAL,EAAjB;AACAY,IAAAA,OAAO,CAACC,GAAR,CAAYd,IAAZ;AACA,QAAIoB,UAAc,GAAG,EAArB;AACAA,IAAAA,UAAU,CAACC,GAAX,GAAiBrB,IAAI,CAACsB,CAAtB;AACAF,IAAAA,UAAU,CAACG,GAAX,GAAiBvB,IAAI,CAACwB,CAAtB;AACAJ,IAAAA,UAAU,CAACK,IAAX,GAAkB,EAAlB;;AACA,QAAGzB,IAAI,CAACsB,CAAL,KAAWI,SAAd,EAAwB;AACpB,WAAI,IAAIvB,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACH,IAAI,CAACsB,CAAL,CAAOlB,MAArB,EAA4BD,CAAC,EAA7B,EAAgC;AAC5BiB,QAAAA,UAAU,CAACK,IAAX,CAAgBpB,IAAhB,CAAqB,CAACL,IAAI,CAACsB,CAAL,CAAOnB,CAAP,IAAUH,IAAI,CAACwB,CAAL,CAAOrB,CAAP,CAAX,IAAsB,CAA3C;AACH;AACJ;;AACDM,IAAAA,aAAa,CAACW,UAAD,CAAb;AACH;;AACDR,EAAAA,kBAAkB;AACrB;MAtBeJ,kB","sourcesContent":["import {useState} from 'react';\r\nimport { setSourceMapRange } from 'typescript';\r\n\r\nexport function RetrieveApiData(setSymbols:any){\r\n    async function retrieveData(){\r\n        const url:string = 'https://finnhub.io/api/v1/stock/symbol?exchange=US&token=buk0lsv48v6r2017c170'\r\n        let resp = await fetch(url);\r\n        let data = await resp.json();\r\n        let symbolObjects:Array<any> = [];\r\n        for(let i:number = 0; i < data.length; i++){\r\n            symbolObjects.push({symbol:data[i].symbol,description:data[i].description});\r\n        }\r\n        setSymbols(symbolObjects);\r\n    }\r\n    retrieveData();\r\n}\r\n\r\nexport function RetrieveSymbolData(setSymbolData:any,symbol:string,startDate:any,endDate:any){\r\n    async function retrieveSymbolData(){\r\n        console.log(startDate.getTime().toString().slice(0,-3));\r\n        startDate = Math.floor(startDate.getTime()/1000);\r\n        endDate = Math.floor(endDate.getTime()/1000);\r\n        console.log(startDate,endDate);\r\n        const url:string = `https://finnhub.io/api/v1/stock/candle?symbol=${symbol}&resolution=D&from=${startDate}&to=${endDate}&token=buk0lsv48v6r2017c170`;\r\n        let resp = await fetch(url);\r\n        let data = await resp.json();\r\n        console.log(data);\r\n        let symbolData:any = {};\r\n        symbolData.low = data.l;\r\n        symbolData.hgh = data.h;\r\n        symbolData.curr = [];\r\n        if(data.l !== undefined){\r\n            for(let i=0;i<data.l.length;i++){\r\n                symbolData.curr.push((data.l[i]+data.h[i])/2);\r\n            }\r\n        }\r\n        setSymbolData(symbolData);\r\n    }\r\n    retrieveSymbolData();\r\n}"]},"metadata":{},"sourceType":"module"}