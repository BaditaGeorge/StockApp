{"ast":null,"code":"export function retrieveApiData(setSymbols) {\n  async function retrieveData() {\n    const url = 'https://finnhub.io/api/v1/stock/symbol?exchange=US&token=bukfm8n48v6s9fns403g';\n    let resp = await fetch(url);\n    let data = await resp.json();\n    let symbolObjects = [];\n    console.log(data);\n\n    for (let i = 0; i < data.length; i++) {\n      symbolObjects.push({\n        notation: data[i].symbol,\n        description: data[i].description\n      });\n    }\n\n    setSymbols(symbolObjects);\n  }\n\n  retrieveData();\n}\nexport function retrieveSymbolData(setSymbolData, setLoading, symbol, startDate, endDate) {\n  async function retrieveSymbolData() {\n    startDate = Math.floor(startDate.getTime() / 1000);\n    endDate = Math.floor(endDate.getTime() / 1000);\n    const url = `https://finnhub.io/api/v1/stock/candle?symbol=${symbol}&resolution=D&from=${startDate}&to=${endDate}&token=bukfm8n48v6s9fns403g`;\n    let resp = await fetch(url);\n    let data = await resp.json();\n    let symbolData = {\n      lowest: [],\n      highest: [],\n      close: []\n    };\n    symbolData.lowest = data.l;\n    symbolData.highest = data.h;\n\n    if (data.l !== undefined) {\n      for (let i = 0; i < data.l.length; i++) {\n        symbolData.close.push((data.l[i] + data.h[i]) / 2);\n      }\n    }\n\n    console.log('ah');\n    setLoading(value => {\n      return !value;\n    });\n    setSymbolData(symbolData);\n  }\n\n  retrieveSymbolData();\n}","map":{"version":3,"sources":["D:/work/ReactTraining/stock/host/stockapp.github.io/stock-app/src/utility/ApiData.tsx"],"names":["retrieveApiData","setSymbols","retrieveData","url","resp","fetch","data","json","symbolObjects","console","log","i","length","push","notation","symbol","description","retrieveSymbolData","setSymbolData","setLoading","startDate","endDate","Math","floor","getTime","symbolData","lowest","highest","close","l","h","undefined","value"],"mappings":"AAIA,OAAO,SAASA,eAAT,CAAyBC,UAAzB,EAAwC;AAC3C,iBAAeC,YAAf,GAA6B;AACzB,UAAMC,GAAU,GAAG,+EAAnB;AACA,QAAIC,IAAQ,GAAG,MAAMC,KAAK,CAACF,GAAD,CAA1B;AACA,QAAIG,IAAQ,GAAG,MAAMF,IAAI,CAACG,IAAL,EAArB;AACA,QAAIC,aAA4B,GAAG,EAAnC;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYJ,IAAZ;;AACA,SAAI,IAAIK,CAAQ,GAAG,CAAnB,EAAsBA,CAAC,GAAGL,IAAI,CAACM,MAA/B,EAAuCD,CAAC,EAAxC,EAA2C;AACvCH,MAAAA,aAAa,CAACK,IAAd,CAAmB;AAACC,QAAAA,QAAQ,EAACR,IAAI,CAACK,CAAD,CAAJ,CAAQI,MAAlB;AAAyBC,QAAAA,WAAW,EAACV,IAAI,CAACK,CAAD,CAAJ,CAAQK;AAA7C,OAAnB;AACH;;AACDf,IAAAA,UAAU,CAACO,aAAD,CAAV;AACH;;AACDN,EAAAA,YAAY;AACf;AAED,OAAO,SAASe,kBAAT,CAA4BC,aAA5B,EAA8CC,UAA9C,EAA6DJ,MAA7D,EAA2EK,SAA3E,EAAyFC,OAAzF,EAAqG;AACxG,iBAAeJ,kBAAf,GAAmC;AAC/BG,IAAAA,SAAS,GAAGE,IAAI,CAACC,KAAL,CAAWH,SAAS,CAACI,OAAV,KAAoB,IAA/B,CAAZ;AACAH,IAAAA,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWF,OAAO,CAACG,OAAR,KAAkB,IAA7B,CAAV;AACA,UAAMrB,GAAU,GAAI,iDAAgDY,MAAO,sBAAqBK,SAAU,OAAMC,OAAQ,6BAAxH;AACA,QAAIjB,IAAI,GAAG,MAAMC,KAAK,CAACF,GAAD,CAAtB;AACA,QAAIG,IAAI,GAAG,MAAMF,IAAI,CAACG,IAAL,EAAjB;AACA,QAAIkB,UAAqB,GAAG;AAACC,MAAAA,MAAM,EAAC,EAAR;AAAWC,MAAAA,OAAO,EAAC,EAAnB;AAAsBC,MAAAA,KAAK,EAAC;AAA5B,KAA5B;AACAH,IAAAA,UAAU,CAACC,MAAX,GAAoBpB,IAAI,CAACuB,CAAzB;AACAJ,IAAAA,UAAU,CAACE,OAAX,GAAqBrB,IAAI,CAACwB,CAA1B;;AACA,QAAGxB,IAAI,CAACuB,CAAL,KAAWE,SAAd,EAAwB;AACpB,WAAI,IAAIpB,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACL,IAAI,CAACuB,CAAL,CAAOjB,MAArB,EAA4BD,CAAC,EAA7B,EAAgC;AAC5Bc,QAAAA,UAAU,CAACG,KAAX,CAAiBf,IAAjB,CAAsB,CAACP,IAAI,CAACuB,CAAL,CAAOlB,CAAP,IAAUL,IAAI,CAACwB,CAAL,CAAOnB,CAAP,CAAX,IAAsB,CAA5C;AACH;AACJ;;AACDF,IAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AACAS,IAAAA,UAAU,CAAEa,KAAD,IAAiB;AACxB,aAAO,CAACA,KAAR;AACH,KAFS,CAAV;AAGAd,IAAAA,aAAa,CAACO,UAAD,CAAb;AACH;;AACDR,EAAAA,kBAAkB;AACrB","sourcesContent":["import {useState} from 'react';\r\nimport {setSourceMapRange } from 'typescript';\r\nimport {ISymbol,IStockData} from '../models/Data';\r\n\r\nexport function retrieveApiData(setSymbols:any){\r\n    async function retrieveData(){\r\n        const url:string = 'https://finnhub.io/api/v1/stock/symbol?exchange=US&token=bukfm8n48v6s9fns403g';\r\n        let resp:any = await fetch(url);\r\n        let data:any = await resp.json();\r\n        let symbolObjects:Array<ISymbol> = [];\r\n        console.log(data);\r\n        for(let i:number = 0; i < data.length; i++){\r\n            symbolObjects.push({notation:data[i].symbol,description:data[i].description});\r\n        }\r\n        setSymbols(symbolObjects);\r\n    }\r\n    retrieveData();\r\n}\r\n\r\nexport function retrieveSymbolData(setSymbolData:any,setLoading:any,symbol:string,startDate:any,endDate:any){\r\n    async function retrieveSymbolData(){\r\n        startDate = Math.floor(startDate.getTime()/1000);\r\n        endDate = Math.floor(endDate.getTime()/1000);\r\n        const url:string = `https://finnhub.io/api/v1/stock/candle?symbol=${symbol}&resolution=D&from=${startDate}&to=${endDate}&token=bukfm8n48v6s9fns403g`;\r\n        let resp = await fetch(url);\r\n        let data = await resp.json();\r\n        let symbolData:IStockData = {lowest:[],highest:[],close:[]};\r\n        symbolData.lowest = data.l;\r\n        symbolData.highest = data.h;\r\n        if(data.l !== undefined){\r\n            for(let i=0;i<data.l.length;i++){\r\n                symbolData.close.push((data.l[i]+data.h[i])/2);\r\n            }\r\n        }\r\n        console.log('ah');\r\n        setLoading((value:boolean)=>{\r\n            return !value;\r\n        });\r\n        setSymbolData(symbolData);\r\n    }\r\n    retrieveSymbolData();\r\n}"]},"metadata":{},"sourceType":"module"}